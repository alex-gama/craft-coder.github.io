<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Mockito</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Mockito</h1>
      <h2 class="project-tagline">Let's craft code with Mockito Library</h2>
      
      
    </section>

    <section class="main-content">
      <h3 id="optionalof">Optional.of</h3>

<p><strong>Example 1</strong></p>

<p>Basic usage of <strong>Optional.of()</strong> and <strong>Optional.isPresent()</strong> methods from Guava Optional.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoogleGuavaOptionalTest</span> <span class="o">{</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldGetTheValueUsingGuavaOptional</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">optionalNumber</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
		
		<span class="n">assertTrue</span><span class="o">(</span><span class="n">optionalNumber</span><span class="o">.</span><span class="na">isPresent</span><span class="o">());</span>
		
		<span class="n">Integer</span> <span class="n">value</span> <span class="o">=</span> <span class="n">optionalNumber</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
		
		<span class="n">assertThat</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p>Notice that we used the <strong>Optional.get()</strong> method to retrieve the value wrapped by the Optional. But what will happen if we try to call this method with null values? Wait, we will see one more example before we try that :)</p>

<p><strong>Example 2</strong></p>

<p>Using the <strong>Optional.isPresent()</strong> method to check if the Optional has a value</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoogleGuavaOptionalTest</span> <span class="o">{</span>

	<span class="nd">@Test</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldPrintOutThatThereIsNoUser</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
			<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Payment</span><span class="o">();</span>
			<span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">optional</span> <span class="o">=</span> <span class="n">payment</span><span class="o">.</span><span class="na">getNullableUser</span><span class="o">();</span>
			
			<span class="k">if</span> <span class="o">(</span><span class="n">optional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Yeah! There is an User"</span><span class="o">);</span>
				<span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">optional</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"There is no User, sorry about that :("</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">}</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
	
	<span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">getNullableUser</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">fromNullable</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">//forcing the user to be null</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p><strong>Example 3</strong></p>

<p>Trying to get a value from an Optional that has a null value. Yes, we will get an Exception in our face!</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoogleGuavaOptionalTest</span> <span class="o">{</span>

	<span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="n">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldThowsAnExceptionWhenWeTryToGetAnUserThatNoLongerExists</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Payment</span><span class="o">();</span>
		<span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">optional</span> <span class="o">=</span> <span class="n">payment</span><span class="o">.</span><span class="na">getNullableUser</span><span class="o">();</span>

		<span class="n">optional</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p>Optional.get() cannot be called on a absent value, if you do that, Guava will throws an IllegalStateException. Again, the idea behind the Optional is that you should worry about nullable values, therefore, forcing you to check if you has or not a value.</p>

<p><strong>Example 4</strong></p>

<p>Retrieving a valid (non null or course) User from an Optional</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoogleGuavaOptionalTest</span> <span class="o">{</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldGetTheNonNullableUserFromMethod</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Payment</span><span class="o">();</span>

		<span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userOptional</span> <span class="o">=</span> <span class="n">payment</span><span class="o">.</span><span class="na">getUserWithName</span><span class="o">();</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">userOptional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"There is an User there! Nice!"</span><span class="o">);</span>
			<span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userOptional</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
			<span class="n">assertThat</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"Alexandre Gama"</span><span class="o">));</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">getUserWithName</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="s">"Alexandre Gama"</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p>As you can see, we are retrieving a valid User by calling the <strong>Optional.of(user)</strong></p>

<p><a href="google-guava-optional">Back</a> to Optional page</p>


      <footer class="site-footer">
        
        <span class="site-footer-credits">This project was made by <a href="https://github.com/alexandregama">@alexandregama</a> with s2, music and beer.</span>
        <p>
            <span class="site-footer-credits"><a href="https://www.facebook.com/craftcoder">Facebook</a> | <a href="https://www.instagram.com/alexandregama/">Instagram | </a>
                <a href="https://medium.com/craft-coder">Medium</a> | <a href="https://twitter.com/alexandregamma">Twitter</a>
            </span>
        </p>

      </footer>
    </section>

    
      <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script>
      <script type="text/javascript">
        try {
          var pageTracker = _gat._getTracker("UA-90625499-1");
        pageTracker._trackPageview();
        } catch(err) {}
      </script>
    
  </body>
</html>
