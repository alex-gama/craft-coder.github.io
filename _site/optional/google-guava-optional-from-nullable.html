<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Google Guava - Crafting Code</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Google Guava - Crafting Code</h1>
      <h2 class="project-tagline">Let's craft code with Google Guava Framework</h2>
      
      
    </section>

    <section class="main-content">
      <h3 id="optionalfromnullable">Optional.fromNullable</h3>

<p><strong>Example 1</strong></p>

<p>Sometimes you don’t know if the object is null or not. Get the following situation:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">getUserFromDatabase</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">getFromDatabase</span><span class="o">();</span> <span class="c1">//could be null or not</span>

		<span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="n">User</span> <span class="nf">getFromDatabase</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//ok, weird, but just to show you the case :)</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p>Notice that the <strong>getUserFromDatabase()</strong> method does not know if there is an User or not. In that case, you can’t just use <strong>Optional.of()</strong> because you might get a Nullable user and your code will broke when you call the <strong>Optional.get()</strong> method.</p>

<p><strong>Example 2</strong></p>

<p>Instead of just use the <strong>Optional.of()</strong> method you could use the <strong>Optional.fromNullable()</strong> method as you can see below</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">getUserFromDatabase</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">getFromDatabase</span><span class="o">();</span> <span class="c1">//could be null or not</span>

		<span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">fromNullable</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">//now it is better :)</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="n">User</span> <span class="nf">getFromDatabase</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//ok, weird, but just to show you the case :)</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p><a href="google-guava-optional">Back</a> to Optional page</p>


      <footer class="site-footer">
        
        <span class="site-footer-credits">This project was made by <a href="https://github.com/alexandregama">@alexandregama</a> with s2, music and beer.</span>
        <p>
            <span class="site-footer-credits"><a href="https://www.facebook.com/craftcoder">Facebook</a> | <a href="https://www.instagram.com/alexandregama/">Instagram | </a>
                <a href="https://medium.com/craft-coder">Medium</a> | <a href="https://twitter.com/alexandregamma">Twitter</a>
            </span>
        </p>

      </footer>
    </section>

    
      <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script>
      <script type="text/javascript">
        try {
          var pageTracker = _gat._getTracker("UA-90625499-1");
        pageTracker._trackPageview();
        } catch(err) {}
      </script>
    
  </body>
</html>
